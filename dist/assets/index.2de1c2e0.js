import{E as te}from"./base.4ec2dd7a.js";import{s as C,E as oe,c as ne,e as se,g as de,h as re,u as A,w as pe,j as y}from"./request.0596940e.js";import{E as me,a as ie}from"./el-form-item.bdd8cc19.js";/* empty css                 */import{b as ce,c as ge}from"./el-row.21d6585d.js";/* empty css                  */import{E as Ee}from"./index.075f7128.js";import{d as ve,W as w,r as i,q as U,o as fe,a as Fe,c as _e,e,x as l,L as m,s as x,b as D,p as be,f as De,g as Be}from"./index.e62c7c5d.js";import"./vnode.9dc3de1f.js";const Ne=s=>C({url:"/dept/list",method:"post",data:s}),Ve=s=>C({url:"/dept/search",method:"post",data:s}),Ce=s=>C({url:"/dept/save",method:"post",data:s}),ye=s=>C({url:"/dept/del",method:"put",data:s}),ke=s=>C({url:"/dept/update",method:"put",data:s}),P=s=>(be("data-v-209b7219"),s=s(),De(),s),he={class:"dept-container"},Ae=P(()=>D("span",null,"\u90E8\u95E8\u540D\u79F0",-1)),we=P(()=>D("span",null,"\u8D1F\u8D23\u4EBA",-1)),xe={class:"table"},Ie={class:"page-box"},ze={class:"dialog-footer"},Se={class:"dialog-footer"},Ue=ve({__name:"index",setup(s){let c=w([]);const q=()=>{const t=[],a={};for(let o=0;o<c.length;o++){a.value={};for(let p in c[o])p=="id"?a.value.\u5E8F\u53F7=o+1:p=="deptName"?a.value.\u90E8\u95E8\u540D\u79F0=c[o][p]:p=="manager"?a.value.\u8D1F\u8D23\u4EBA=c[o][p]:p=="allNum"?a.value.\u90E8\u95E8\u4EBA\u6570=c[o][p]:p=="remark"&&(a.value.\u5907\u6CE8=c[o][p]);t.push(a.value)}const r=A.json_to_sheet(t),b=A.book_new();A.book_append_sheet(b,r,"data"),pe(b,"\u90E8\u95E8\u4FE1\u606F.xlsx")},T=t=>{_.value.push(t.deptId),I()},I=()=>{ce.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E9B\u90E8\u95E8","\u7CFB\u7EDF\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{j()}).catch(()=>{y({type:"info",message:"\u53D6\u6D88\u5220\u9664"}),_.value.length=0})},j=async()=>{(await ye(_.value)).code===200&&(y({type:"success",message:"\u5220\u9664\u6210\u529F"}),_.value.length=0,await f())},_=i([]),M=t=>{const a=[];t.forEach(r=>{a.push(r.deptId)}),_.value=a,c=t},$=()=>{B.value=!0},g="140px",B=i(!1),d=i({deptName:"",manager:"",allNum:"",remark:""}),R=async()=>{const t=await Ce(d.value);console.log(t),t.code===200&&(y({message:"\u65B0\u589E\u6210\u529F",type:"success"}),B.value=!1,await f(),G())},L=w({deptName:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"}],manager:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",trigger:"blur"}],allNum:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u4EBA\u6570",trigger:"blur"}]}),W=U(()=>!(d.value.deptName!==""&&d.value.manager!==""&&d.value.allNum!=="")),G=()=>{d.value={deptId:"",deptName:"",manager:"",allNum:1,remark:""}},v=i({pageNum:1,pageSize:10,deptName:"",manager:""}),H=async()=>{console.log("searchParams.value",v.value);const t=await Ve(v.value);t.code===200&&(k.value=t.data.content,h.value=t.data.totalSize)},J=()=>{v.value={pageNum:1,pageSize:10,deptName:"",manager:""}},K=()=>{f(),J()},n=i({deptId:"",deptName:"",manager:"",allNum:1,remark:""}),N=i(!1),O=t=>{n.value.deptId=t.deptId,n.value.deptName=t.deptName,n.value.manager=t.manager,n.value.allNum=t.allNum,n.value.remark=t.remark,N.value=!0},Q=async()=>{(await ke(n.value)).code===200&&(y({message:"\u4FEE\u6539\u6210\u529F",type:"success"}),N.value=!1,await f())},X=w({deptName:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"}],manager:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",trigger:"blur"}],allNum:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u4EBA\u6570",trigger:"blur"}]}),Y=U(()=>!(n.value.deptName!==""&&n.value.manager!==""&&n.value.allNum!=="")),V=i({pageSize:10,pageNum:1}),f=async()=>{const t=await Ne(V.value);t.code===200&&(k.value=t.data.content,h.value=t.data.totalSize)},Z=()=>{f()},ee=()=>{f()},k=i(),h=i(0);return fe(()=>{f()}),(t,a)=>{const r=Ee,b=oe,o=te,p=ge,F=ne,ae=se,ue=de,E=me,z=ie,S=re;return Fe(),_e("div",he,[e(p,{class:"dept-search",gutter:20},{default:l(()=>[e(b,{span:5},{default:l(()=>[Ae,e(r,{modelValue:v.value.deptName,"onUpdate:modelValue":a[0]||(a[0]=u=>v.value.deptName=u),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(b,{span:5},{default:l(()=>[we,e(r,{modelValue:v.value.manager,"onUpdate:modelValue":a[1]||(a[1]=u=>v.value.manager=u),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA"},null,8,["modelValue"])]),_:1}),e(b,{span:4},{default:l(()=>[e(o,{type:"primary",onClick:H},{default:l(()=>[m("\u641C\u7D22")]),_:1}),e(o,{type:"warning",onClick:K},{default:l(()=>[m("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1}),e(p,{class:"dept-operation",justify:"start"},{default:l(()=>[e(o,{type:"primary",onClick:$},{default:l(()=>[m("\u65B0\u589E")]),_:1}),e(o,{type:"danger",onClick:I,disabled:_.value.length===0},{default:l(()=>[m("\u5220\u9664")]),_:1},8,["disabled"]),e(o,{type:"warning",onClick:q,disabled:x(c).length===0},{default:l(()=>[m("\u5BFC\u51FA")]),_:1},8,["disabled"])]),_:1}),D("div",xe,[e(ae,{data:k.value,style:{width:"100%"},border:"",center:"",stripe:"",onSelectionChange:M},{default:l(()=>[e(F,{type:"selection",width:"55"}),e(F,{label:"\u5E8F\u53F7",type:"index",align:"center",width:"100"}),e(F,{prop:"deptName",label:"\u90E8\u95E8\u540D\u79F0",align:"center"}),e(F,{prop:"manager",label:"\u8D1F\u8D23\u4EBA",align:"center"}),e(F,{prop:"allNum",label:"\u90E8\u95E8\u4EBA\u6570",align:"center"}),e(F,{prop:"remark",label:"\u5907\u6CE8",align:"center"}),e(F,{label:"\u64CD\u4F5C",align:"center"},{default:l(u=>[e(o,{link:"",type:"primary",size:"small",onClick:le=>O(u.row)},{default:l(()=>[m("\u4FEE\u6539")]),_:2},1032,["onClick"]),e(o,{link:"",type:"primary",size:"small",onClick:le=>T(u.row)},{default:l(()=>[m("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),D("div",Ie,[e(ue,{background:"","page-size":V.value.pageSize,"onUpdate:page-size":a[2]||(a[2]=u=>V.value.pageSize=u),"current-page":V.value.pageNum,"onUpdate:current-page":a[3]||(a[3]=u=>V.value.pageNum=u),"page-sizes":[5,10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:Z,onCurrentChange:ee},null,8,["page-size","current-page","total"])]),e(S,{modelValue:B.value,"onUpdate:modelValue":a[9]||(a[9]=u=>B.value=u),title:"\u65B0\u589E\u90E8\u95E8\u4FE1\u606F"},{footer:l(()=>[D("span",ze,[e(o,{onClick:a[8]||(a[8]=u=>B.value=!1)},{default:l(()=>[m("\u53D6\u6D88")]),_:1}),e(o,{type:"primary",onClick:R,disabled:x(W)},{default:l(()=>[m("\u786E\u5B9A")]),_:1},8,["disabled"])])]),default:l(()=>[e(z,{model:d.value,"label-position":"top",rules:L},{default:l(()=>[e(E,{label:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0","label-width":g,prop:"deptName"},{default:l(()=>[e(r,{modelValue:d.value.deptName,"onUpdate:modelValue":a[4]||(a[4]=u=>d.value.deptName=u),autocomplete:"true",clearable:""},null,8,["modelValue"])]),_:1}),e(E,{label:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA","label-width":g,prop:"manager"},{default:l(()=>[e(r,{modelValue:d.value.manager,"onUpdate:modelValue":a[5]||(a[5]=u=>d.value.manager=u),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(E,{label:"\u8BF7\u8F93\u5165\u90E8\u95E8\u4EBA\u6570","label-width":g,prop:"allNum"},{default:l(()=>[e(r,{modelValue:d.value.allNum,"onUpdate:modelValue":a[6]||(a[6]=u=>d.value.allNum=u),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(E,{label:"\u5907\u6CE8","label-width":g,prop:"remark"},{default:l(()=>[e(r,{modelValue:d.value.remark,"onUpdate:modelValue":a[7]||(a[7]=u=>d.value.remark=u),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(S,{modelValue:N.value,"onUpdate:modelValue":a[15]||(a[15]=u=>N.value=u),title:"\u4FEE\u6539\u90E8\u95E8\u4FE1\u606F"},{footer:l(()=>[D("span",Se,[e(o,{onClick:a[14]||(a[14]=u=>N.value=!1)},{default:l(()=>[m("\u53D6\u6D88")]),_:1}),e(o,{type:"primary",onClick:Q,disabled:x(Y)},{default:l(()=>[m("\u786E\u5B9A")]),_:1},8,["disabled"])])]),default:l(()=>[e(z,{model:n.value,"label-position":"top",rules:X},{default:l(()=>[e(E,{label:"\u90E8\u95E8\u540D\u79F0","label-width":g,prop:"deptName"},{default:l(()=>[e(r,{modelValue:n.value.deptName,"onUpdate:modelValue":a[10]||(a[10]=u=>n.value.deptName=u),autocomplete:"true",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(E,{label:"\u8D1F\u8D23\u4EBA","label-width":g,prop:"manager"},{default:l(()=>[e(r,{modelValue:n.value.manager,"onUpdate:modelValue":a[11]||(a[11]=u=>n.value.manager=u),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA"},null,8,["modelValue"])]),_:1}),e(E,{label:"\u90E8\u95E8\u4EBA\u6570","label-width":g,prop:"allNum"},{default:l(()=>[e(r,{modelValue:n.value.allNum,"onUpdate:modelValue":a[12]||(a[12]=u=>n.value.allNum=u),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u4EBA\u6570"},null,8,["modelValue"])]),_:1}),e(E,{label:"\u5907\u6CE8","label-width":g},{default:l(()=>[e(r,{modelValue:n.value.remark,"onUpdate:modelValue":a[13]||(a[13]=u=>n.value.remark=u),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u4FE1\u606F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const Ge=Be(Ue,[["__scopeId","data-v-209b7219"]]);export{Ge as default};
